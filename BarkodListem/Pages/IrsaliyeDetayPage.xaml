<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:models="clr-namespace:BarkodListem.Models"
    x:Class="BarkodListem.Pages.IrsaliyeDetayPage"
    Title="İrsaliye Detay"
    BackgroundColor="#F5F5F5">

    <Grid Padding="10"
        RowDefinitions="Auto,Auto,*,Auto"
        ColumnDefinitions="*">

        <!-- Row 0: Barkod okut/gir -->
        <Grid Grid.Row="0"
          ColumnDefinitions="*,Auto"
          HeightRequest="48"
          Margin="0,0,0,10">
            <Entry x:Name="barkodEntry"
             Grid.Column="0"
             Placeholder="Barkod okut veya gir"
             Keyboard="Text"
             ReturnType="Done"
             Completed="OnEntryCompleted"
             TextChanged="OnEntryTextChanged"
             HorizontalOptions="FillAndExpand"
             ClearButtonVisibility="WhileEditing" />
            <Button Grid.Column="1"
              Text="📷"
              FontSize="36"
              WidthRequest="80"
              HeightRequest="64"
              Margin="8,0,0,0"
              VerticalOptions="Center"
              BackgroundColor="Transparent"
              Clicked="OnCameraClicked" />
        </Grid>

        <!-- Row 1: Başlık kartı -->
        <Frame Grid.Row="1"
           Padding="8,4"
           CornerRadius="6"
           BackgroundColor="#2196F3"
           HasShadow="false"
           HorizontalOptions="FillAndExpand"
           Margin="0,0,0,10">
            <Grid ColumnDefinitions="60,*,0,0,0,0">
                <Label Text="ID"
               TextColor="White"
               FontAttributes="Bold"
               VerticalOptions="Center" />
                <Label Grid.Column="1"
               Text="Paket Adı"
               TextColor="White"
               FontAttributes="Bold"
               VerticalOptions="Center" />
            </Grid>
        </Frame>

        <!-- Row 2: Liste -->
        <CollectionView Grid.Row="2"
                    ItemsSource="{Binding PaketHareketler}"
                    SelectionMode="None"
                    HorizontalOptions="FillAndExpand"
                    VerticalOptions="FillAndExpand">
            <CollectionView.ItemsLayout>
                <LinearItemsLayout Orientation="Vertical" ItemSpacing="4" />
            </CollectionView.ItemsLayout>

            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="models:PaketHrkModel">
                    <Frame Padding="8,4"
                 Margin="0,0,0,4"
                 CornerRadius="6"
                 HasShadow="false"
                 BorderColor="#DDD"
                 HorizontalOptions="FillAndExpand"
                 VerticalOptions="Start">
                        <Frame.Style>
                            <Style TargetType="Frame">
                                <Setter Property="BackgroundColor" Value="White" />
                                <Style.Triggers>
                                    <DataTrigger TargetType="Frame"
                               Binding="{Binding IsHighlighted}"
                               Value="True">
                                        <Setter Property="BackgroundColor" Value="LightGreen" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Frame.Style>

                        <Grid ColumnDefinitions="60,*,0,0,0,0">
                            <Label Text="{Binding PAKET_HRK_ID}"
                     VerticalOptions="Center" />
                            <Label Grid.Column="1"
                     Text="{Binding PAKET_ADI}"
                     VerticalOptions="Center" />
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- Row 3: Kaydet butonu -->
        <Button Grid.Row="3"
            Text="Kaydet"
            HorizontalOptions="FillAndExpand"
            Margin="0,10,0,0"
            Clicked="OnGonderClicked" />
    </Grid>
</ContentPage>
